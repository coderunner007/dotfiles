PLUGINS=$HOME/.zsh/plugins
THEMES=$HOME/.zsh/themes
CACHE=$HOME/.zsh/cache
TMUX_PLUGINS=$HOME/.tmux/plugins

present_dir=$(pwd)
echo "Currently in $present_dir"

# Install plugins
echo 'Downloading plugins...'
rm -rf $PLUGINS
mkdir -p $PLUGINS
echo 'Syntax highlighting for commands'
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $PLUGINS/zsh-syntax-highlighting
# echo 'Syntax highlighting for filetypes'
# curl https://raw.githubusercontent.com/trapd00r/zsh-syntax-highlighting-filetypes/master/zsh-syntax-highlighting-filetypes.zsh > $PLUGINS/zsh-syntax-highlighting-filetypes.zsh
echo 'Git aliases'
curl https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/plugins/git/git.plugin.zsh > $PLUGINS/git.zsh
curl https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/lib/git.zsh > $PLUGINS/git-lib.zsh
echo 'zsh completions'
git clone git://github.com/zsh-users/zsh-completions.git $PLUGINS/zsh-completions
echo 'Auto-suggestion'
git clone https://github.com/zsh-users/zsh-autosuggestions.git $PLUGINS/zsh-autosuggestions
echo 'History search'
git clone https://github.com/zsh-users/zsh-history-substring-search $PLUGINS/zsh-history-substring-search
echo 'Clipboard library functions'
curl https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/lib/clipboard.zsh > $PLUGINS/clipboard.zsh
echo 'Copy file contents to clipboard'
curl https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/plugins/copyfile/copyfile.plugin.zsh > $PLUGINS/copyfile.zsh
echo 'Copy directory path to clipboard'
curl https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/plugins/copydir/copydir.plugin.zsh > $PLUGINS/copydir.zsh
echo 'Extract any compressed file'
curl https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/plugins/extract/_extract > $PLUGINS/_extract
curl https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/plugins/extract/extract.plugin.zsh > $PLUGINS/extract.zsh
echo 'Fasd zsh plugin'
curl https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/plugins/fasd/fasd.plugin.zsh > $PLUGINS/fasd.plugin.zsh

echo '\n Installing tmux plugin manager'
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

echo '\nInstall the following commands after this script is run:'
echo '1. highlight (http://www.andre-simon.de/doku/highlight/en/install.php)'
echo '2. fasd (https://github.com/clvv/fasd/wiki/Installing-via-Package-Managers)'
echo '3. May have to rebuild zcompdump for zsh-completions (https://github.com/zsh-users/zsh-completions#manual-installation): rm -f ~/.zcompdump; compinit\n'
echo '4. Press prefix + I (capital i, as in Install) to fetch & install tmux plugins. Refer: https://github.com/tmux-plugins/tpm'
echo '\n'

# Install themes
echo 'Downloading theme ...'
echo 'Downloading and applying powerlevel10k theme...'
rm -rf $THEMES
mkdir -p $THEMES
git clone https://github.com/romkatv/powerlevel10k.git $THEMES/powerlevel10k
curl https://raw.githubusercontent.com/romkatv/dotfiles-public/master/.purepower > $THEMES/.purepower

# Created directory for cache (history, fasd)
mkdir -p $CACHE

# Copy the tmux, zsh, tmux, alacritty configs
echo 'Creating soft links for zsh & tmux config files'
ln -s $present_dir/.zshrc ~/.zshrc
ln -s $present_dir/.p10k.zsh ~/.p10k.zsh
ln -s $present_dir/.tmux.conf ~/.tmux.conf
mkdir ~/.config/alacritty/
ln -s $present_dir/alacritty/alacritty.yml ~/.config/alacritty/alacritty.yml

echo '\n===================Installation Completed===================\n'
echo '\nInstall the following commands after this script is run:'
echo '1. highlight (http://www.andre-simon.de/doku/highlight/en/install.php)'
echo '2. fasd (https://github.com/clvv/fasd/wiki/Installing-via-Package-Managers)'
echo '3. May have to rebuild zcompdump for zsh-completions (https://github.com/zsh-users/zsh-completions#manual-installation): rm -f ~/.zcompdump; compinit\n'
echo '\n=========This is necessary for complete tmux features=======\n'
echo '4. Press prefix + I (capital i, as in Install) to fetch & install tmux plugins. Refer: https://github.com/tmux-plugins/tpm'
echo '\n'

echo 'IF CONFIG IS NOT WORKING AS EXPECTED, THEN MAKE SURE THAT THIS IS RUN FROM THE `dotfiles` ROOT DIRECTORY'
echo '\n'
